spring.datasource.url=jdbc:postgresql://localhost:5432/housing_db
spring.datasource.username=housing_user
spring.datasource.password=housing_pass
spring.datasource.driver-class-name=org.postgresql.Driver
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true
spring.cloud.bootstrap.enabled=false
spring.main.allow-bean-definition-overriding=true

# Habilitar el indicador de salud para Actuator
resilience4j.circuitbreaker.instances.appraisalCB.registerHealthIndicator=true

# Umbral de fallo: si el 50% de las llamadas fallan
resilience4j.circuitbreaker.instances.appraisalCB.failureRateThreshold=50

# Ventana de análisis: analiza las últimas 6 llamadas
resilience4j.circuitbreaker.instances.appraisalCB.slidingWindowSize=6

# Mínimo de llamadas antes de empezar a calcular (mantenlo bajo para testing)
resilience4j.circuitbreaker.instances.appraisalCB.minimumNumberOfCalls=1

# Tiempo que el circuito se queda ABIERTO (15 segundos)
resilience4j.circuitbreaker.instances.appraisalCB.waitDurationInOpenState=15s

# Transición automática de OPEN a HALF_OPEN tras el tiempo de espera
resilience4j.circuitbreaker.instances.appraisalCB.automaticTransitionFromOpenToHalfOpenEnabled=true

# Tipo de ventana (por conteo de llamadas)
resilience4j.circuitbreaker.instances.appraisalCB.slidingWindowType=COUNT_BASED

# Llamadas permitidas en estado de prueba (Half-Open)
resilience4j.circuitbreaker.instances.appraisalCB.permittedNumberOfCallsInHalfOpenState=2